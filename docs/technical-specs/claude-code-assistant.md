# Claude Code Assistant Documentation

This file documents the files created and updated by Claude Code in the code documentation directory.

## Technical Specification Documentation

The following table provides a detailed overview of the technical specification documentation, organized by category with the most recent files in each category listed first:

### AI/ML

| Filename | Creation Date | Description |
|----------|--------------|-------------|
| claude_code_prompts.md | Mar 27, 2025 | Collection of prompts used with Claude for code assistance |
| prompt-management-implementation-plan.md | Mar 24, 2025 | Outlines implementation plan for a prompt management system with content hashing |
| python-ai-services-technical-spec.md | Mar 22, 2025 | Technical specification for Python-based AI services |
| document-classification-prompt.md | Mar 21, 2025 | Prompt template for document classification |
| markdown-document-classification-prompt.md | Mar 21, 2025 | Prompt template for markdown document classification |
| ai_columns_review.md | Mar 20, 2025 | Review of AI-related database columns and schema |
| enhanced-analysis-prompt.md | Mar 19, 2025 | Prompt template for enhanced content analysis |
| doc-assessment-prompt.md | Mar 18, 2025 | Prompt template for document assessment |

### Audio Processing

| Filename | Creation Date | Description |
|----------|--------------|-------------|
| audio-processing-pipeline-db-schema.md | Mar 26, 2025 | Summarizes database schema for the DHG Presenter audio processing pipeline |
| monorepo-integrated-audio-processing.md | Mar 25, 2025 | Outlines reorganization of monorepo to better support audio processing workflows |

### Database

| Filename | Creation Date | Description |
|----------|--------------|-------------|
| database-tables-overview.md | Mar 28, 2025 | Provides an overview of database tables organized by functional group |
| sql-history-implementation-plan.md | Mar 23, 2025 | Implementation plan for SQL query history tracking |
| supabase-sql-query-guide.md | Mar 23, 2025 | Guide for creating and executing SQL queries in Supabase |

### Application

| Filename | Creation Date | Description |
|----------|--------------|-------------|
| dhg-presenter.md | Mar 18, 2025 | Technical specification for the DHG Presenter application |
| guts-dashboard.md | Mar 16, 2025 | Specification for dashboard functionality for the guts component |
| dashboard-function-inventory.md | Mar 16, 2025 | Inventory of functions used in dashboard components |

### Documentation

| Filename | Creation Date | Description |
|----------|--------------|-------------|
| claude-code-assistant.md | Mar 27, 2025 | Documents files created and updated by Claude Code in the code documentation directory |
| doc-assessment-implementation.md | Mar 19, 2025 | Describes implementation of document assessment functionality |
| document-type-request-template.md | Mar 18, 2025 | Template for requesting new document types |
| document-type-analysis.md | Mar 17, 2025 | Analysis of document types and their relationships |

### Infrastructure

| Filename | Creation Date | Description |
|----------|--------------|-------------|
| monorepo-architecture_bullmq.md | Mar 23, 2025 | Architecture specification using BullMQ for task processing |
| technical-spec_packages_bullmq.md | Mar 23, 2025 | Technical specification for packages using BullMQ |
| rate-limiting-technical-spec.md | Mar 17, 2025 | Technical specification for rate limiting implementation |
| architecture-comparison.md | Mar 15, 2025 | Comparison of different architecture approaches |
| PNPM-USAGE.md | Mar 15, 2025 | Documentation for PNPM package manager usage in the project |
| vite-configuration-guide.md | Mar 14, 2025 | Guide for configuring Vite for the project |
| env-organization-spec.md | Mar 12, 2025 | Specification for environment organization |
| file-reader-report.md | Mar 08, 2025 | Report on file reader component performance and features |
| monorepo-organization-2024.md | Feb 10, 2025 | Describes the monorepo structure and organization for 2024 |

### Development

| Filename | Creation Date | Description |
|----------|--------------|-------------|
| script-document-types.md | Mar 14, 2025 | Details script document types and classifications |
| shared-packages-guide.md | Mar 13, 2025 | Guide for using and developing shared packages |
| script-manager-implementation-spec.md | Mar 12, 2025 | Implementation specification for script manager |
| typescript-cli-technical-spec.md | Mar 05, 2025 | Specification for the TypeScript CLI tools and interfaces |

### Development Process

| Filename | Creation Date | Description |
|----------|--------------|-------------|
| implementation_plan.md | Mar 12, 2025 | General implementation plan for system components |
| development-process-specification.md | Mar 11, 2025 | Outlines development process and workflow |

### Integration

| Filename | Creation Date | Description |
|----------|--------------|-------------|
| source_expert_google_design.md | Mar 09, 2025 | Design specification for source expert Google integration |
| google-drive-integration.md | Mar 09, 2025 | Specification for Google Drive integration |

### Processing

| Filename | Creation Date | Description |
|----------|--------------|-------------|
| batch-processing.md | Mar 22, 2025 | Describes the batch processing system database schema and workflow |
| batch-processing-technical-spec.md | Mar 20, 2025 | Technical specification for batch processing system |
| script-analysis-pipeline-spec.md | Mar 10, 2025 | Detailed specification for the script analysis pipeline |

## Code Documentation Files

These files were created to document various components of the system:

1. `docs/code-documentation/AI-documentation.md`
2. `docs/code-documentation/Classify-documentation.md`
3. `docs/code-documentation/Cmds-documentation.md`
4. `docs/code-documentation/Code-documentation.md`
5. `docs/code-documentation/Docs-documentation.md`
6. `docs/code-documentation/Experts-documentation.md`
7. `docs/code-documentation/Gmail-documentation.md`
8. `docs/code-documentation/Guts-documentation.md`
9. `docs/code-documentation/Home-documentation.md`
10. `docs/code-documentation/Scripts-documentation.md`
11. `docs/code-documentation/Show-documentation.md`
12. `docs/code-documentation/Supabase-documentation.md`
13. `docs/code-documentation/Sync-documentation.md`
14. `docs/code-documentation/Transcribe-documentation.md`
15. `docs/code-documentation/Viewer-documentation.md`
16. `docs/code-documentation/Viewer2-documentation.md`
17. `docs/code-documentation/Write-documentation.md`

Code Refactoring
1. `docs/code-implementation/code-refactoring-priority-guide.md`

## CLI Pipeline Service Documentation

The following documentation files in the `docs/cli-pipeline` folder describe various services in the CLI pipeline:

### Recently Updated Service Documentation (March 23-24, 2025)

1. `docs/cli-pipeline/document-pipeline-documentation.md` (March 24)
2. `docs/cli-pipeline/document-organization-documentation.md` (March 23)
3. `docs/cli-pipeline/file-management-documentation.md` (March 23)
4. `docs/cli-pipeline/document-type-checker-documentation.md` (March 23)
5. `docs/cli-pipeline/script-claude-service-documentation.md` (March 23)
6. `docs/cli-pipeline/supabase-client-service-documentation.md` (March 23)
7. `docs/cli-pipeline/script-management-service-documentation.md` (March 23)
8. `docs/cli-pipeline/prompt-query-service-documentation.md` (March 23)
9. `docs/cli-pipeline/document-classification-service-documentation.md` (March 23)
10. `docs/cli-pipeline/supabase-service-documentation.md` (March 23)
11. `docs/cli-pipeline/report-service-documentation.md` (March 23)
12. `docs/cli-pipeline/file-service-documentation.md` (March 23)
13. `docs/cli-pipeline/claude-service-documentation.md` (March 23)

### Prompt-Related Documentation

1. `docs/cli-pipeline/prompt-lookup-script-analysis-prompt.md` (March 22)
2. `docs/cli-pipeline/prompt-lookup-markdown-document-classification-prompt.md` (March 21)

### General Documentation

1. `docs/cli-pipeline/CLI_PIPELINE_GUIDANCE.md` (March 19)
2. `docs/cli-pipeline/cli-pipeline-commands.md` (March 16)

## CLI Pipeline Scripts

The `scripts/cli-pipeline` directory contains numerous scripts for various tasks:

### Server Scripts
1. `simple-md-server.js` - Markdown file server
2. `simple-script-server.js` - Script file server
3. `docs-archive-server.js` - Document archive server

### Server Launcher Scripts
1. `start-md-server.sh` - Starts the markdown server
2. `start-script-server.sh` - Starts the script server
3. `start-archive-server.sh` - Starts the archive server

### Document Pipeline Scripts
1. `document-pipeline-main.sh` - Main document pipeline orchestrator
2. `document-pipeline-manager.sh` - Manages document pipeline execution
3. `document-summary-report.ts` - Generates document summary reports
4. `document-type-manager.ts` - Manages document types
5. `display-doc-paths.sh` - Displays document paths
6. `display-doc-paths.ts` - TypeScript version of document path display
7. `display-doc-paths-simple.ts` - Simplified document path display
8. `display-doc-paths-enhanced.ts` - Enhanced document path display
9. `show-doc-paths.sh` - Shows document paths
10. `show-doc-paths-enhanced.sh` - Enhanced document path visualization
11. `sync-markdown-files.sh` - Syncs markdown files
12. `sync-markdown-files.ts` - TypeScript version of markdown file sync

### Script Pipeline Scripts
1. `script-pipeline-main.sh` - Main script pipeline orchestrator
2. `script-manager.sh` - Manages scripts
3. `analyze-script.ts` - Analyzes scripts
4. `analyze-scripts.sh` - Orchestrates script analysis
5. `test-script-analyzer.ts` - Tests script analyzer
6. `classify-script-with-prompt.sh` - Classifies scripts using prompts
7. `classify-script-with-prompt.ts` - TypeScript version of script classification
8. `classify-untyped-script.js` - Classifies scripts without types
9. `classify-untyped-script.ts` - TypeScript version of untyped script classification
10. `show-untyped-scripts.sh` - Shows scripts without types
11. `check-duplicates.ts` - Checks for duplicate scripts

### AI and Prompt Management
1. `run-ai-analyze.sh` - Runs AI analysis
2. `prompt-lookup.sh` - Looks up prompts
3. `prompt-lookup.ts` - TypeScript version of prompt lookup
4. `check-claude-api-key.sh` - Checks Claude API key
5. `classify-document-with-prompt.sh` - Classifies documents using prompts
6. `setup-prompts.sh` - Sets up prompts
7. `validate-ai-assets.sh` - Validates AI assets
8. `validate-prompt-relationships.sh` - Validates prompt relationships

### Utility Scripts
1. `command-history-tracker.ts` - Tracks command history
2. `load-env.sh` - Loads environment variables
3. `run-sync.sh` - Runs sync operations
4. `test-env.sh` - Tests environment setup
5. `import-script-analysis.sh` - Imports script analysis

## Fix and Root Scripts

The following scripts handle system maintenance and database operations:

### Fix Scripts (`scripts/fix/`)

These scripts are designed to repair and fix various parts of the system:

1. `fix-ai-integration.sh` - Repairs AI integration (Mar 23)
2. `fix-batch-analyze.sh` - Fixes batch analysis functionality (Mar 23)
3. `fix-metadata-fields.js` - Corrects metadata fields (Mar 23)
4. `fix-metadata.sh` - Fixes metadata (Mar 23)
5. `fix-permissions.sh` - Repairs file and directory permissions (Mar 26)
6. `migrate-size-field.ts` - Migrates file size fields (Mar 24)
7. `supabase-connect.js` - Fixes Supabase connections (Mar 27)

### Root Scripts (`scripts/root/`)

These scripts handle core system operations:

1. `apply_execute_sql_rpc.sh` - Applies SQL RPC execution (Mar 17)
2. `backup-env.sh` - Backs up environment variables (Mar 20)
3. `check-export-function.js` - Validates export functions (Mar 5)
4. `classify-markdowns.sh` - Classifies markdown documents (Mar 20)
5. `clear-vite-cache.sh` - Clears Vite build cache (Mar 20)
6. `create-migration.sh` - Creates database migrations (Mar 20)
7. `deploy.sh` - Handles deployment (Mar 20)
8. `direct-db-sync.js` - Directly syncs with the database (Mar 20)
9. `ensure-sync-script.sh` - Ensures sync scripts are functioning (Mar 20)
10. `export-db-functions.js` - Exports database functions (Mar 5)
11. `final-sync.js` - Performs final synchronization (Mar 20)
12. `generate-function-types.js` - Generates function type definitions (Mar 2)
13. `generate-types.ts` - Generates TypeScript types (Feb 18)
14. `get-git-info.sh` - Retrieves git repository information (Feb 17)
15. `get-types.ts` - Gets TypeScript types (Feb 17)
16. `markdown-report.sh` - Generates markdown reports (Mar 20)
17. `migrate-cli-scripts.sh` - Migrates CLI scripts (Mar 20)
18. `process-documentation.ts` - Processes documentation files (Mar 20)
19. `restore-document-types.sh` - Restores document types (Mar 20)
20. `run-direct-sync.sh` - Runs direct database sync (Mar 20)
21. `run-sync-direct.sh` - Alternative direct sync runner (Mar 20)
22. `search-db-functions.js` - Searches database functions (Mar 20)
23. `set-permissions.sh` - Sets file permissions (Mar 20)
24. `setup-cli-package.sh` - Sets up CLI package (Mar 20)
25. `show-tree.js` - Shows directory tree structure (Mar 20)
26. `simple-db-query.sh` - Runs simple database queries (Mar 20)
27. `sync-scripts-direct.js` - Direct script synchronization (Mar 20)
28. `sync-scripts.sh` - Script synchronization (Mar 20)
29. `test-gitignore.sh` - Tests gitignore patterns (Mar 20)
30. `track.sh` - Tracks script usage (Mar 20)
31. `update-docs-database.sh` - Updates documentation database (Mar 20)
32. `verify-cli-scripts.sh` - Verifies CLI scripts (Mar 20)
33. `verify-document-types.sh` - Verifies document types (Mar 20)

## Audio Processing Scripts

The following scripts handle audio processing functionality:

### Python Audio Scripts (`scripts/python/`)

These scripts provide audio extraction and processing capabilities:

1. `clip_audio.py` - Clips audio files to specific lengths (Mar 26)
2. `clip_audio.sh` - Shell wrapper for audio clipping (Mar 26)
3. `clip_navaux.sh` - Clips the Navaux audio file (Mar 26)
4. `extract_audio.sh` - Extracts audio from media files (Mar 26)
5. `modal_audio_summarize.sh` - Summarizes audio using Modal (Mar 26)
6. `modal_process.py` - Modal-based audio processing (Mar 26)
7. `modal_process.sh` - Shell wrapper for Modal processing (Mar 26)
8. `modal_summary.py` - Generates summaries using Modal (Mar 26)
9. `modal_summary.sh` - Shell wrapper for Modal summaries (Mar 26)
10. `process_local.py` - Processes audio locally (Mar 26)
11. `summarize_audio.sh` - Summarizes audio content (Mar 26)
12. `whisper_audio.py` - Transcribes audio using Whisper (Mar 26)
13. `whisper_audio.sh` - Shell wrapper for Whisper transcription (Mar 26)

### Python Audio Processor Package (`packages/python-audio-processor/scripts/`)

These scripts are part of the dedicated audio processing package:

1. `audio_transcript_configurable.py` - Configurable audio transcription (Mar 27)
2. `base_audio_transcript.py` - Base audio transcription functionality (Mar 27)
3. `estimate_modal_time.sh` - Estimates Modal processing time (Mar 27)
4. `estimate_processing_time.py` - Estimates processing time (Mar 27)
5. `extract_audio_text.py` - Extracts text from audio (Mar 27)
6. `parallel_transcript.py` - Parallel audio transcription (Mar 26)
7. `process_m4a_summary.py` - Processes M4A files and creates summaries (Mar 26)
8. `process_m4a_transcript.py` - Transcribes M4A audio files (Mar 26)
9. `quick_audio_transcript.py` - Fast audio transcription (Mar 26)
10. `run_modal_test.sh` - Tests Modal functionality (Mar 27)
11. `run_text_extraction.sh` - Runs text extraction (Mar 27)
12. `test_modal_roundtrip.py` - Tests complete Modal processing (Mar 26)

## Database Schema

This section documents the key tables in the DHG database schema.

### sources_google

This table stores metadata about files from Google Drive.

| Column | Type | Description |
|--------|------|-------------|
| id | string | Primary key |
| name | string | File name |
| drive_id | string | Google Drive file ID |
| mime_type | string | MIME type of the file |
| path | string | File path in the drive |
| parent_path | string | Parent folder path |
| parent_id | string | Parent folder ID |
| size_bytes | number | File size in bytes |
| expert_id | string | Related expert ID |
| document_type_id | string | Document type ID |
| content_extracted | boolean | Whether content was extracted |
| extracted_content | Json | Extracted content data |
| audio_extracted | boolean | Whether audio was extracted |
| audio_duration_seconds | number | Audio duration in seconds |
| created_at | string | Creation timestamp |
| updated_at | string | Last update timestamp |

### expert_documents

This table stores documents associated with experts.

| Column | Type | Description |
|--------|------|-------------|
| id | string | Primary key |
| source_id | string | Related source ID |
| expert_id | string | Related expert ID |
| document_type_id | string | Type of document |
| raw_content | string | Original content |
| processed_content | Json | Processed content |
| status | string | Processing status |
| content_type | string | Content type |
| summary_complete | boolean | Whether summary is complete |
| transcription_complete | boolean | Whether transcription is complete |
| diarization_complete | boolean | Whether diarization is done |
| key_insights | string[] | Key insights from document |
| created_at | string | Creation timestamp |
| updated_at | string | Last update timestamp |

### presentations

This table stores presentation metadata.

| Column | Type | Description |
|--------|------|-------------|
| id | string | Primary key |
| title | string | Presentation title |
| filename | string | Filename |
| folder_path | string | Folder path |
| presenter_name | string | Presenter name |
| transcript | string | Transcript content |
| transcript_status | string | Transcript processing status |
| duration_seconds | number | Duration in seconds |
| recorded_date | string | Recording date |
| main_video_id | string | Related video ID |
| is_public | boolean | Public availability flag |
| metadata | Json | Additional metadata |
| created_at | string | Creation timestamp |
| updated_at | string | Last update timestamp |

### presentation_assets

This table stores assets related to presentations.

| Column | Type | Description |
|--------|------|-------------|
| id | string | Primary key |
| presentation_id | string | Related presentation ID |
| expert_document_id | string | Related expert document ID |
| source_id | string | Related source ID |
| asset_type | string | Type of asset |
| asset_role | string | Role of the asset |
| timestamp_start | number | Start timestamp |
| timestamp_end | number | End timestamp |
| importance_level | number | Asset importance rating |
| metadata | Json | Additional metadata |
| created_at | string | Creation timestamp |
| updated_at | string | Last update timestamp |

### experts

This table stores expert information.

| Column | Type | Description |
|--------|------|-------------|
| id | string | Primary key |
| expert_name | string | Expert name |
| full_name | string | Full name |
| email_address | string | Email address |
| bio | string | Biography |
| expertise_area | string | Area of expertise |
| experience_years | number | Years of experience |
| is_in_core_group | boolean | Core group membership |
| google_email | string | Google email |
| google_user_id | string | Google user ID |
| created_at | string | Creation timestamp |
| updated_at | string | Last update timestamp |

### document_types

This table defines document types in the system.

| Column | Type | Description |
|--------|------|-------------|
| id | string | Primary key |
| document_type | string | Type name |
| category | string | Category |
| description | string | Description |
| file_extension | string | Associated file extension |
| mime_type | string | MIME type |
| is_ai_generated | boolean | Whether AI-generated |
| required_fields | Json | Required metadata fields |
| validation_rules | Json | Validation rules |
| content_schema | Json | Content schema definition |
| ai_processing_rules | Json | AI processing configuration |
| created_at | string | Creation timestamp |
| updated_at | string | Last update timestamp |

### documentation_files

This table stores documentation files.

| Column | Type | Description |
|--------|------|-------------|
| id | string | Primary key |
| file_path | string | File path |
| title | string | Document title |
| summary | string | Document summary |
| document_type_id | string | Document type ID |
| file_hash | string | File content hash |
| file_size | number | File size in bytes |
| language | string | Document language |
| manual_tags | string[] | Manual tags |
| ai_generated_tags | string[] | AI-generated tags |
| ai_assessment | Json | AI assessment data |
| assessment_quality_score | number | Quality score |
| metadata | Json | Additional metadata |
| created_at | string | Creation timestamp |
| updated_at | string | Last update timestamp |

### scripts

This table stores script files and metadata.

| Column | Type | Description |
|--------|------|-------------|
| id | string | Primary key |
| file_path | string | File path |
| title | string | Script title |
| language | string | Programming language |
| document_type_id | string | Document type ID |
| ai_assessment | Json | AI assessment data |
| summary | Json | Script summary |
| file_hash | string | File content hash |
| manual_tags | string[] | Manual tags |
| ai_generated_tags | string[] | AI-generated tags |
| package_json_references | Json | Package references |
| metadata | Json | Additional metadata |
| created_at | string | Creation timestamp |
| updated_at | string | Last update timestamp |

### processing_batches

This table tracks processing batches.

| Column | Type | Description |
|--------|------|-------------|
| id | string | Primary key |
| status | string | Batch status |
| total_files | number | Total files in batch |
| processed_files | number | Files processed |
| processed_duration_seconds | number | Processing time |
| total_duration_seconds | number | Total duration |
| error_message | string | Error message if any |
| error_details | string | Detailed error info |
| processor_config | Json | Processor configuration |
| item_ids | Json | IDs of items in batch |
| resource_usage | Json | Resource usage stats |
| created_at | string | Creation timestamp |
| updated_at | string | Last update timestamp |

### sync_history

This table tracks synchronization history.

| Column | Type | Description |
|--------|------|-------------|
| id | string | Primary key |
| folder_id | string | Folder ID |
| folder_name | string | Folder name |
| status | string | Sync status |
| files_total | number | Total files |
| files_processed | number | Files processed |
| files_added | number | Files added |
| files_updated | number | Files updated |
| files_skipped | number | Files skipped |
| files_error | number | Files with errors |
| duration_ms | number | Duration in milliseconds |
| error_message | string | Error message if any |
| timestamp | string | Timestamp |
| completed_at | string | Completion timestamp |

### sync_statistics

This table stores synchronization statistics.

| Column | Type | Description |
|--------|------|-------------|
| id | string | Primary key |
| folder_id | string | Folder ID |
| folder_name | string | Folder name |
| google_drive_count | number | Google Drive item count |
| google_drive_documents | number | Documents count |
| google_drive_folders | number | Folders count |
| total_google_drive_items | number | Total items |
| local_files | number | Local file count |
| matching_files | number | Files that match |
| new_files | number | New files |
| local_only_files | number | Files only in local |
| mp4_files | number | MP4 file count |
| mp4_total_size | string | Total MP4 file size |
| created_at | string | Creation timestamp |

## Next Steps

More documentation will be added to this file as development continues. Future updates will include:

1. Detailed descriptions of each script's functionality
2. Dependencies between scripts
3. Common usage patterns
4. Integration points with other system components
5. Performance metrics and optimization strategies
6. Troubleshooting guides for common issues
7. Database schema relationships